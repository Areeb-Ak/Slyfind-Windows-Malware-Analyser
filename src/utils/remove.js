import fs from "fs";
import { join } from "path";

const rm = async (dirpath) => {
  const searchStrings = [".pcap_Flow.csv", ".pcap", "predictions.csv"]; // The string at the end of the file names
  fs.readdir(dirpath, (err, files) => {
    if (err) {
      console.error("Error reading directory:", err);
      return;
    }
    files.forEach((file) => {
      if (searchStrings.some((searchString) => file.endsWith(searchString))) {
        const filePath = join(dirpath, file);
        try {
          fs.unlinkSync(filePath);
        } catch (unlinkError) {
          console.error(`Error removing file "${file}":`, unlinkError.message);
        }
      }
    });
  });
};

export default rm;
