import { exec } from 'child_process'

// Define an asynchronous function to execute the external process
async function start_flask(exePath, changePath) {
  process.chdir(changePath)
  return new Promise((resolve, reject) => {
    exec(exePath, (error, stdout, stderr) => {
      if (error) {
        console.error(`Error: ${error.message}`)
        reject(error.message)
        return
      }
      if (stderr) {
        console.error(`stderr: ${stderr}`)
        reject(stderr)
        return
      }
      resolve()
    })
  })
}

export default start_flask
