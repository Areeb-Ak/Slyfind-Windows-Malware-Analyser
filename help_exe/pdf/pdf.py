import sys
import subprocess
import os

# Check if the user provided a command-line argument
if len(sys.argv) < 2:
    print("Usage: python script.py <command>")
    sys.exit(1)

def exact_path(vol):
    """  Get absolute path to resources, works for dev and for Pyinstaller  """
    try:
        # Pyinstaller creates a temp folder and stores all files in them
        base_path = sys._MEIPASS
    except Exception:
        base_path = os.path.abspath(".")

    return os.path.join(base_path, vol)

try:
    command = f'python {exact_path("pdfscan.py")} "{sys.argv[1]}"'
    # Execute the command using subprocess
    result = subprocess.run(command, shell=True, text=True)

    # Print any error output
    if result.stderr:
        print("Error occurred:")
        print(result.stderr)
except Exception as e:
    print("An error occurred:", e)
