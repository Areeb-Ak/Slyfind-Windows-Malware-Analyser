import pandas as pd
import pickle
import warnings
import sys


def model_find(name):
    warnings.filterwarnings("ignore")

    input_data = pd.read_csv(name)

    with open(sys.argv[2], 'rb') as model_file:
        model = pickle.load(model_file)

    with open(sys.argv[3], 'rb') as scaler_file:
        scaler = pickle.load(scaler_file)

    features = input_data.values  # Assuming the first column is not a feature

    reshaped_features = features.reshape(1, -1)
    scaled_features = scaler.transform(features)
    
    prediction = model.predict_proba(scaled_features)

    prediction_dict = {
    "Begnign": prediction[0][0],
    "Ransomware": prediction[0][1],
    "Spyware": prediction[0][2],
    "Trojan": prediction[0][3]
    }
    print(prediction_dict)


if __name__ == "__main__":
    model_find(sys.argv[1])
