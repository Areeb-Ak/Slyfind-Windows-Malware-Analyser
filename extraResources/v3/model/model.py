import warnings
import sys
import pickle
import lzma
import sklearn.ensemble._forest

warnings.filterwarnings("ignore")

l = sys.argv[1].strip("\{\}").split(",")

cartoon = []
for i in l:
    cartoon.append(float(i.split(":")[1]))

# Load the compressed model
with open(sys.argv[2], 'rb') as f:
    compressed_model = f.read()

# Decompress the model
decompressed_model = lzma.decompress(compressed_model)

# Load the model using pickle
model = pickle.loads(decompressed_model)

# Load the compressed model
with open(sys.argv[3], 'rb') as f:
    compressed_model = f.read()

# Decompress the model
decompressed_model = lzma.decompress(compressed_model)

# Load the model using pickle
scaler = pickle.loads(decompressed_model)

scaled_features = scaler.transform([cartoon])

prediction = model.predict_proba(scaled_features)

prediction_dict = {
"Begnign": prediction[0][0],
"Ransomware": prediction[0][1],
"Spyware": prediction[0][2],
"Trojan": prediction[0][3]
}
print(prediction_dict)
